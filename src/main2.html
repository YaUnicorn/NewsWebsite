<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="layui/css/layui.css">
    <style>
        /*左边*/
        .news {
            box-sizing: border-box;
            border: 1px solid #666;
            border-radius: 5px;
            /*定位*/
            position: absolute;
            /*top:20%;*/
            left: 2%;
            height: 100%;
            width: 68%;
            display: inline;
            overflow: hidden;
            background: #393D49;
        }

        /*123*/
        /*右边*/
        .Myinfo {
            box-sizing: border-box;
            border: 1px solid #666;
            border-radius: 5px;
            width: 28%;
            height: 100%;
            position: absolute;
            /*margin-left: 950px;*/
            margin-left: 70%;
        }

        body {
            background: whitesmoke;
            /*background: #f4f4f4;*/
        }

        /*新闻分类*/
        .newsType {
            box-sizing: border-box;
            border: 1px solid #666;
            border-radius: 5px;
            position: absolute;
            height: 93.5%;
            width: 35%;
            margin-top: 60px;
        }

        /*新闻分类导航栏*/
        .newsTypeBar {
            box-sizing: border-box;
            border: 1px solid #666;
            border-radius: 5px;
            position: absolute;
            height: 6%;
            width: 100%;
        }

        /*详细新闻*/
        .newsDetails {
            box-sizing: border-box;
            border: 1px solid #666;
            border-radius: 5px;
            position: relative;
            height: 93.5%;
            width: 65%;
            margin-top: 60px;
            margin-left: 35%;
            overflow: hidden;
            background: #ffffff;
        }

        a {
            text-decoration: none;
        }

        nav {
            height: 30px;
            border-radius: 8px;
            margin-top: -13px;
        "
        }

        nav ul {
            list-style: none
        }

        nav ul li {
            display: inline;
            font-size: 18px;
        }

        /*轮播图中的轮播新闻没有写son1,son2,son3这个id名，所以注释XL*/
        /*#son1{*/
        /*    !*background-color: #6ce26c;*!*/
        /*    width: 100%;*/
        /*}*/
        /*#son2{*/
        /*    background-color: lightskyblue;*/
        /*    !*width: 900px;*!*/
        /*}*/
        /*#son3{*/
        /*    background-color: beige;*/
        /*    !*width: 900px;*!*/
        /*}*/
        .slide {
            width: 100%;
            height: 600px;
            position: absolute;
        }

        .eslipise, .eslipise_new {
            text-indent: 2em;

            font-weight: normal;

            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
        }

        .eslipise {
            margin-top: 1px;
            margin-left: 8px;
            max-width: 360px;
            /*white-space: nowrap;*/

        }

        .eslipise_new {
            max-width: 90%;
            font-size: 16px;
            margin-left: 12px;
            margin-top: 3px;

        }

        .comms {
            font-weight: normal;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
            max-width: 300%;
            font-size: 16px;
            margin-left: 12px;
            margin-top: 3px;
            /*background: #e6e6e6;*/
            background: #6ce26c;
            border-radius: 5px;
        }

        .box {
            width: 100%;
            height: 80.5%;
            box-sizing: border-box;
            border: 1px solid #666;
            border-radius: 5px;
            margin-top: -11px;

            /*定位*/
            position: absolute;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .box2 {
            height: 100%;
            width: 90%;
            margin-bottom: 20px;
        }

        h1 {
            margin-top: 8px;
            font-family: 楷体;
        }

        .news_img {
            width: 88%;
            margin-left: 6%;
            border-radius: 8px;
        }

        .ckxq {
            margin-left: 85%
        }

        .psuoj {
            text-indent: 2em
        }

        .likenewsimg {
            width: 80px;
            height: 70px;
            border-radius: 5px;
            margin-left: 15%;
        }

        .Nametd {
            margin-left: 100%;
            width: 80px;
        }

        .deteleNewsImg {
            height: 20px;
            width: 20px;
            margin-left: 400%;
        }

        .news_title {
            margin-left: 100px;
        }

        .focusImg {
            width: 40px;
            height: 40px;
            border-radius: 15px;
            margin-left: 10%;
            margin-top: 8px;
        }

        .focus_Btn {
            margin-left: 310%;
            width: 65px;
        }

        .linkStyle {
            font-size: 32px;
            font-family: 楷体;
        }

        /*详细新闻界面中所点击的×号的样式设置*/
        .newdaily_back {
            width: 20px;
            hieht: 20px;
            position: absolute;
            right: 15px;
        }

    </style>
    <script src="layui/layui.js"></script>
    <script src="//res.layui.com/layui/dist/layui.js" charset="utf-8"></script>
    <!--    <script>-->
    <!--        layui.use('upload', function(){-->
    <!--            var upload = layui.upload;-->

    <!--            //执行实例-->
    <!--            var uploadInst = upload.render({-->
    <!--                elem: '#test1' //绑定元素-->
    <!--                ,url: '/upload/' //上传接口-->
    <!--                ,done: function(res){-->
    <!--                    //上传完毕回调-->
    <!--                }-->
    <!--                ,error: function(){-->
    <!--                    //请求异常回调-->
    <!--                }-->
    <!--            });-->
    <!--        });-->
    <!--    </script>-->
    <script>
        //注意：导航 依赖 element 模块，否则无法进行功能性操作
        layui.use('element', function () {
            var element = layui.element;
            //…
        });
        layui.use('element', function () {
            var element = layui.element;
            //一些事件监听
            element.on('tab(demo)', function (data) {
                console.log(data);
            });
        });
    </script>
    <script>
        //Demo
        layui.use('form', function () {
            var form = layui.form;

            //监听提交
            form.on('submit(formDemo)', function (data) {
                layer.msg(JSON.stringify(data.field));
                return false;
            });
        });
    </script>
    <script>

        var photos = localStorage.getItem("photoes");
        var name = localStorage.getItem("name");
        var online = localStorage.getItem("online");
        //新闻导航栏--数据库
        //详细新闻中有一个取消信息回退的×号按钮 5.29add----------------------------------------------
        function newdailyback() {
            var lunbo = document.getElementById("lunbo");
            var addNews = document.getElementById("addNews");
            var alterInfo = document.getElementById("alterInfo");
            var news_Conent = document.getElementById("news_Conent");
            if (news_Conent.style.display == 'block') {
                news_Conent.style.display = 'none';
                addNews.style.display = 'none';
                alterInfo.style.display = 'none';
                lunbo.style.display = 'block';
            }
        }

        //点击缩略新闻和点击轮播新闻都可以查看详细新闻----5.30add
        function new_detail(d) {
            console.log("所点击的新闻n_id是" + d);


            var newboxflag = document.getElementById("newdaily_box2");
            if (newboxflag) {
                console.log("有详细新闻的盒子存在,要做一个删除操作");
                document.getElementById("newdaily_box1").removeChild(document.getElementById("newdaily_box1").firstElementChild);
            }
            var newdailyObj = document.createElement("div");
            newdailyObj.className = "box2_content";
            newdailyObj.id = "newdaily_box2";
            newdailyObj.setAttribute("n_id", d)//给详细新闻页面中获取到的新闻块div设置一个n_id用于辨别这个新闻。
            newdailyObj.setAttribute('style', 'height:90%;width:80%;margin-left:23px;margin-bottom:5%');
            document.getElementById("newdaily_box1").appendChild(newdailyObj);
            var imgObj = document.createElement("img");
            imgObj.src = "images/back1.png";
            imgObj.onclick = newdailyback;
            imgObj.className = "newdaily_back";
            newdailyObj.appendChild(imgObj);
            var h1Obj = document.createElement("h1");
            h1Obj.innerHTML = "标题";//次处需要使用获取到的新闻标题
            newdailyObj.appendChild(h1Obj);
            var tableTop = document.createElement("table");
            tableTop.setAttribute('style', 'margin-top:-15px;margin-left:5%');
            newdailyObj.appendChild(tableTop);
            var trFirst = document.createElement("tr");//这个tr是为了显示头像，昵称和关注按钮的
            tableTop.appendChild(trFirst);
            var td1photo = document.createElement("td");
            td1photo.rowSpan = "2";
            td1photo.setAttribute('style', 'width:50px;font-size:15px');
            trFirst.appendChild(td1photo);
            var imgphoto = document.createElement("img");
            imgphoto.src = "images/head.png";
            imgphoto.setAttribute('style', 'width:38px');
            td1photo.appendChild(imgphoto);
            var td2name = document.createElement("td");
            td2name.setAttribute('style', 'width:370px;font-size:14px');
            td2name.innerHTML = "昵称";
            trFirst.appendChild(td2name);
            var td3 = document.createElement("td");
            td3.rowSpan = "2";
            td3.setAttribute('style', 'width:100px');
            var buttonfocus = document.createElement("button");
            buttonfocus.id = "foucs_fr";//设置关注按钮的id名
            buttonfocus.onclick = attention;//设置关注的点击事件
            buttonfocus.setAttribute('style', 'background:#30b8e1;border-radius:8px;color:#ffffff;width:80px');
            buttonfocus.innerHTML = "关注";
            trFirst.appendChild(td3);
            td3.appendChild(buttonfocus);
            var trSecond = document.createElement("tr");//这个tr里放的是日期
            var tddate = document.createElement("td");
            tddate.setAttribute('style', 'font-size:11px');
            tddate.innerHTML = "日期";
            tableTop.appendChild(trSecond);
            trSecond.appendChild(tddate);
            newdailyObj.appendChild(document.createElement("hr"));
            var divP = document.createElement("div");
            var pObj = document.createElement("p");
            pObj.innerHTML = "内容";
            pObj.className = "psuoj";
            newdailyObj.appendChild(divP);
            divP.appendChild(pObj);
            var tableB = document.createElement("table");
            tableB.setAttribute('style', 'margin-button:8px');
            newdailyObj.appendChild(tableB);
            var trB = document.createElement("tr");
            tableB.appendChild(trB);
            var tdkong = document.createElement("td");
            tdkong.setAttribute('style', 'width:420px');
            trB.appendChild(tdkong);
            var tdzan = document.createElement("td");
            tdzan.setAttribute('style', 'width:60px');
            var imgzan = document.createElement("img");
            imgzan.src = "images/zan.png";
            imgzan.width = 30;//这里需要添加点赞的点击事件
            trB.appendChild(tdzan);
            tdzan.appendChild(imgzan);
            var tdcomment = document.createElement("td");
            var imgcomment = document.createElement("img");
            imgcomment.width = 30;
            imgcomment.src = "images/cotake.png";//这里需要添加评论的点击事件
            trB.appendChild(tdcomment);
            tdcomment.appendChild(imgcomment);
            newdailyObj.appendChild(document.createElement("hr"));


        }

        //默认显示综合的新闻XL
        function defaultNews() {
            var request = new XMLHttpRequest();
            request.open("GET", " http://139.199.55.139:8080/api/news/selectNewsByType?" +
                "n_type=" + "3");
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {

                    var json = JSON.parse(request.responseText);//json解析返回的数据
                    if (json.status == "200") {

                        var sametypeth = 0;//设置一个数，用于记录id为3的新闻的数量XL
                        var newsdatath = [];//存放对应新闻id的信息对象 数组
                        var newsith = 0;
                        for (var f = 0; f < json["data"].length; f++) {
                            if (json["data"][f]["n_type"] == "3") {
                                sametypeth++;
                                newsdatath[newsith++] = json["data"][f];
                            }
                        }//end-for
                        for (var g = 0; g < sametypeth; g++) {

                            var childnewth = document.createElement("tr");//一个新闻就是table中的一个tr
                            childnewth.setAttribute("n_id",newsdatath[g]["n_id"])//5.30(2)
                            var tdFirstth = document.createElement("td");//第一行
                            var tdSecondth = document.createElement("td");//第二行
                            var spanFirstth = document.createElement("sapn");//第二行第一个标签放发布时间
                            // var spanSecond=document.createElement("sapn");//第二行第二个标签放发布作者 暂时没有使用到
                            var tdFimgth = document.createElement("img");//放在第一个td里用来显示新闻图片
                            var tdSath = document.createElement("a");//放在第二个td里用来放新闻缩略标题
                            // 标签之间的关系层次
                            document.getElementById("daily_recommds").appendChild(childnewth);
                            childnewth.appendChild(tdFirstth);
                            childnewth.appendChild(tdSecondth);
                            tdFirstth.appendChild(tdFimgth);
                            tdSecondth.appendChild(tdSath);
                            tdSecondth.appendChild(document.createElement("br"));//换行，将新闻缩略标题和新闻发布时间换行分离
                            tdSecondth.appendChild(spanFirstth);
                            // tdSecond.appendChild(spanSecondth);
                            // tdFimgth.className="newsXLimg";
                            tdFimgth.style.width = "80px";
                            tdFimgth.style.height = "60px";
                            tdFimgth.style.borderRadius = "5px";
                            tdFimgth.src = newsdatath[g]["n_img_url"];
                            tdSath.innerHTML = newsdatath[g]["n_title"];
                            spanFirstth.innerHTML = newsdatath[g]["n_release"];
                            spanFirstth.style.fontSize = "4px";

                        }//end-for
                        //点击新闻缩略图中的一个缩略新闻，那么就传一个新闻的n_id给new_detail()这个函数，用于显示详细界面5.29add
                        var trObj = document.getElementById("daily_recommds").getElementsByTagName("tr");
                        for (var i = 0; i < trObj.length; i++) {
                            (function (num) {
                                trObj[num].addEventListener("click", function () {
                                    new_content();
                                    new_detail(trObj[num].getAttribute("n_id"));
                                })
                            })(i);
                        }//end-for

                    }
                }
            };
        }

        //默认显示综合的新闻轮播图XL
        function defaultLunBo() {
            var request = new XMLHttpRequest();
            request.open("GET", " http://139.199.55.139:8080/api/news/selectNewsByType?" +
                "n_type=" + 3);//传递所点击的li标签的index自定义属性，里面存放着新闻种类的id.
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);//json解析返回的数据
                    if (json.status == "200") {
                        var newsnum = 0;//用于记录一个类别新闻的数量
                        var newsContent = [];//准备存放轮播图中的新闻
                        var newslunboi = 0;
                        for (var i = 0; i < json["data"].length; i++) {
                            if (3 == json["data"][i]["n_type"]) {
                                newsnum++;
                                newsContent[newslunboi++] = json["data"][i];
                            }
                        }//end-for
                        for (var j = 0; j < newsnum; j++) {
                            var divChild = document.createElement("div");//轮播模块中的一个轮播新闻图
                            divChild.setAttribute("n_id",newsContent[j]["n_id"]);//5.30(2)add
                            divChild.className = "slide";
                            document.getElementById("lunbo").appendChild(divChild);
                            divChild.appendChild(document.createElement("hr"));
                            var h1Obj = document.createElement("h1");//h1新闻大标题
                            h1Obj.innerHTML = newsContent[j]["n_title"];
                            divChild.appendChild(h1Obj);
                            divChild.appendChild(divChild.appendChild(document.createElement("hr")));
                            var imgObj = document.createElement("img");//存放图片
                            imgObj.className = "news_img";
                            imgObj.src = newsContent[j]["n_img_url"];
                            divChild.appendChild(imgObj);
                            var h4Obj = document.createElement("h4");//h4新闻前言
                            h4Obj.className = "eslipise_new";
                            divChild.appendChild(h4Obj);
                            var pObj = document.createElement("p");
                            pObj.className = "ckxq";
                            divChild.appendChild(pObj);
                        }//end-for
                        var arr = document.getElementsByClassName("slide");
                        for (var i = 0; i < arr.length; i++) {
                            arr[i].style.top = i * 600 + "px";
                        }//end-for

                        //点击新闻轮播图中的一个轮播新闻，那么就传一个新闻的n_id给new_detail()这个函数，用于显示详细界面5.29add
                        var divObj = document.getElementById("lunbo").getElementsByTagName("div");
                        for (var i = 0; i < divObj.length; i++) {
                            (function (num) {
                                divObj[num].addEventListener("click", function () {
                                    new_content();
                                    new_detail(divObj[num].getAttribute("n_id"));
                                })
                            })(i);
                        }//end-for

                    }
                }
            };//end-request.onreadystatechange = function ()
        }

        //点击导航栏的新闻类别显示对应的新闻缩略图
        function navli_suolue(p) {
            //删除新闻板块的所有新闻
            var trarray = document.getElementById("daily_recommds").getElementsByTagName("tr");
            var trlength = trarray.length;
            for (var h = 0; h < trlength; h++) {
                document.getElementById("daily_recommds").removeChild(trarray[0]);
            }
            //第一件事情：li的字体颜全部色变成黑色；第二件事情：被点击的字体颜色变成蓝色
            var navli_array = document.getElementById("newsnav").getElementsByTagName("li");
            for (var t = 0; t < navli_array.length; t++) {
                navli_array[t].getElementsByTagName("a")[0].style.color = "#ffffff";
                navli_array[t].getElementsByTagName("a")[0].className = "linkStyle";

            }
            //第二件事情：被点击的字体颜色变成蓝色
            p.getElementsByTagName("a")[0].style.color = "#a4a3d1";

            var index_type_id = p.getAttribute("index");//index_type_id是所点击的新闻类别的对应id
            //点击新闻种类name之后，要向数据库提交新闻id，获取对应新闻id的新闻内容
            // 两件事情：第一件事情就是移除全部新闻，第二件事件显示所点击的li所对应的新闻缩略

            var request = new XMLHttpRequest();
            request.open("GET", " http://139.199.55.139:8080/api/news/selectNewsByType?" +
                "n_type=" + p.getAttribute("index"));//传递所点击的li标签的index自定义属性，里面存放着新闻种类的id.
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);//json解析返回的数据
                    if (json.status == "200") {
                        var sametype = 0;//设置一个数，用于记录同一id的新闻的数量XL
                        var newsdata = [];//存放对应新闻id的信息对象 数组
                        var newsi = 0;
                        for (var d = 0; d < json["data"].length; d++) {
                            if (index_type_id == json["data"][d]["n_type"]) {
                                sametype++;
                                newsdata[newsi++] = json["data"][d];

                            }
                        }//end-for

                        for (var e = 0; e < sametype; e++) {
                            var childnew = document.createElement("tr");//一个新闻就是table中的一个tr
                            childnew.setAttribute("n_id",newsdata[e]["n_id"]);//5.30(2)add
                            var tdFirst = document.createElement("td");//第一行
                            var tdSecond = document.createElement("td");//第二行
                            var spanFirst = document.createElement("sapn");//第二行第一个标签放发布时间
                            // var spanSecond=document.createElement("sapn");//第二行第二个标签放发布作者 暂时没有使用到
                            var tdFimg = document.createElement("img");//放在第一个td里用来显示新闻图片
                            var tdSa = document.createElement("a");//放在第二个td里用来放新闻缩略标题
                            // 标签之间的关系层次
                            document.getElementById("daily_recommds").appendChild(childnew);
                            childnew.appendChild(tdFirst);
                            childnew.appendChild(tdSecond);
                            tdFirst.appendChild(tdFimg);
                            tdSecond.appendChild(tdSa);
                            tdSecond.appendChild(document.createElement("br"));//换行，将新闻缩略标题和新闻发布时间换行分离
                            tdSecond.appendChild(spanFirst);
                            // tdSecond.appendChild(spanSecond);
                            // tdFimg.className="newsXLimg";
                            tdFimg.style.width = "80px";
                            tdFimg.style.height = "60px";
                            tdFimg.style.borderRadius = "5px";
                            tdFimg.src = newsdata[e]["n_img_url"];
                            tdSa.innerHTML = newsdata[e]["n_title"];
                            spanFirst.innerHTML = newsdata[e]["n_release"];
                            spanFirst.style.fontSize = "4px";
                        }//end-for

                        //点击新闻缩略图中的一个缩略新闻，那么就传一个新闻的n_id给new_detail()这个函数，用于显示详细界面5.29add
                        var trObj = document.getElementById("daily_recommds").getElementsByTagName("tr");
                        for (var i = 0; i < trObj.length; i++) {
                            (function (num) {
                                trObj[num].addEventListener("click", function () {
                                    new_content();
                                    new_detail(trObj[num].getAttribute("n_id"));

                                })
                            })(i);
                        }//end-for

                    }//end-if(json.status=="200")
                }
            };//end- request.onreadystatechange = function ()
        }

        // 轮播图自动生成新闻开始咯--------------------
        function lunboFunction(w) {
            var divarray = document.getElementById("lunbo").getElementsByTagName("div");
            var divlength = divarray.length;
            //删除新闻轮播图中的新闻。
            for (var h = 0; h < divlength; h++) {
                document.getElementById("lunbo").removeChild(divarray[0]);
            }
            var request = new XMLHttpRequest();
            request.open("GET", " http://139.199.55.139:8080/api/news/selectNewsByType?" +
                "n_type=" + w);//传递所点击的li标签的index自定义属性，里面存放着新闻种类的id.
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);//json解析返回的数据
                    if (json.status == "200") {
                        var newsnum = 0;//用于记录一个类别新闻的数量
                        var newsContent = [];//准备存放轮播图中的新闻
                        var newslunboi = 0;
                        for (var i = 0; i < json["data"].length; i++) {
                            if (w == json["data"][i]["n_type"]) {
                                newsnum++;
                                newsContent[newslunboi++] = json["data"][i];
                            }
                        }//end-for

                        for (var j = 0; j < newsnum; j++) {
                            var divChild = document.createElement("div");//轮播模块中的一个轮播新闻图
                            divChild.setAttribute("n_id",newsContent[j]["n_id"]);//给每一个轮播新闻设置一个index，5.30(2)
                            divChild.className = "slide";
                            document.getElementById("lunbo").appendChild(divChild);
                            divChild.appendChild(document.createElement("hr"));
                            var h1Obj = document.createElement("h1");//h1新闻大标题
                            h1Obj.innerHTML = newsContent[j]["n_title"];
                            divChild.appendChild(h1Obj);
                            divChild.appendChild(divChild.appendChild(document.createElement("hr")));
                            var imgObj = document.createElement("img");//存放图片
                            imgObj.className = "news_img";
                            imgObj.src = newsContent[j]["n_img_url"];
                            divChild.appendChild(imgObj);
                            var h4Obj = document.createElement("h4");//h4新闻前言
                            h4Obj.className = "eslipise_new";
                            divChild.appendChild(h4Obj);
                            //aObj.onclick=lunboclick;//点击h4中a标签文字的一个点击事件。暂时还没写。
                            var pObj = document.createElement("p");
                            pObj.className = "ckxq";
                            divChild.appendChild(pObj);
                        }//end-for
                        var arr = document.getElementsByClassName("slide");
                        for (var i = 0; i < arr.length; i++) {
                            arr[i].style.top = i * 600 + "px";
                        }//end-for

                        //点击新闻轮播图中的一个轮播新闻，那么就传一个新闻的n_id给new_detail()这个函数，用于显示详细界面5.29add
                        var divObj = document.getElementById("lunbo").getElementsByTagName("div");
                        for (var i = 0; i < divObj.length; i++) {
                            (function (num) {
                                divObj[num].addEventListener("click", function () {
                                    new_content();
                                    new_detail(divObj[num].getAttribute("n_id"));
                                })
                            })(i);
                        }//end-for

                    }
                }
            };//end-request.onreadystatechange = function ()
        }

        //这里我需要有完成动态获取数据库中的导航标题名称XL
        function navlist() {
            var newsType_name = [];//存放获取到的新闻的名字  一个数组XL
            var newsType_id = [];//存放获取到的对应的新闻的id 一个数组XL
            defaultNews();//默认显示综合的新闻缩略
            defaultLunBo();//默认显示综合的新闻轮播
            //默认显示的是综合的新闻轮播,还没有做。------------
            var request = new XMLHttpRequest();//创建一个XMLHttpRequest
            request.open("GET", "http://139.199.55.139:8080/api/news/getType");
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);//获取json代码
                    if (json.status == "200") {
                        for (var i = 0; i < json["data"].length; i++) {
                            newsType_name[i] = json["data"][i]["type_name"];
                            newsType_id[i] = json["data"][i]["type_id"];
                        }//end-for
                        for (var j = 0; j < newsType_name.length; j++) {
                            var child = document.createElement("li");//创建li标签
                            var a = document.createElement("a");//创建a标签
                            var str = "   |   ";
                            a.href = "#";
                            a.innerHTML = newsType_name[j] + str;//ul>li>a标签里是新闻类别的名字
                            a.style.color = "#ffffff";
                            child.appendChild(a);//中动态添加a标签
                            child.className = "layui-nav-item";
                            // child.style.cssFloat="left";
                            a.className = "linkStyle";
                            document.getElementById("newsnav").appendChild(child);//ul中动态添加li标签
                        }//end-for

                        //接下来的任务：点击导航栏上面的标签，显示对应的新闻。
                        var navli = document.getElementById("newsnav").getElementsByTagName("li");
                        for (var k = 0; k < newsType_name.length; k++) {
                            //第一件事情，给li标签添加自定义属性index来存放新闻种类id
                            //目前是体育6，军事5，娱乐4，综合3；默认是综合被选中，颜色是淡蓝色
                            navli[k].setAttribute("index", newsType_id[k]);
                            if (navli[k].getAttribute("index") == 3) {
                                navli[k].getElementsByTagName("a")[0].style.color = "#a4a3d1";
                            }
                            (function (num) {
                                navli[num].onclick = function () {
                                    navli_suolue(navli[num]);//点击导航栏上的新闻类别显示新闻缩略
                                    lunboFunction(navli[num].getAttribute("index"));//点击导航栏上的新闻类别显示新闻轮播
                                };
                            })(k)
                        }//end-for
                    }
                    ;//end-内if(json.status=="200")
                }// if (request.readyState === 4 && request.status === 200)
            };//end- request.onreadystatechange
        }//end-function navlist()
        //XL写的菜鸡代码都在这里-----------------------------------------------------------------------------------------------------------------
        //发布新闻中新闻类型的select函数--数据库
        function fbnavlist() {
            var newsType_name = [];//存放获取到的新闻的名字  一个数组XL
            var newsType_id = [];//存放获取到的对应的新闻的id 一个数组XL
            var request = new XMLHttpRequest();//创建一个XMLHttpRequest
            request.open("GET", "http://139.199.55.139:8080/api/news/getType");
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);//获取json代码
                    if (json.status == "200") {
                        for (var i = 0; i < json["data"].length; i++) {
                            newsType_name[i] = json["data"][i]["type_name"];
                            newsType_id[i] = json["data"][i]["type_id"];
                        }//end-for
                        //现在已经获取到了返回的新闻类别信息了，准备动态显示新闻类别
                        for (var j = 0; j < newsType_name.length; j++) {
                            var child1 = document.createElement("option");//创建option标签
                            child1.innerHTML = newsType_name[j];//标签里是新闻类别的名字
                            child1.value = newsType_id[j];
                            document.getElementById("fbnewstype").appendChild(child1);//select中动态添加option标签
                        }//end-for
                    }
                    ;//end-内if
                }
            };
        }

        // 轮播图
        onload = function () {
            navlist();
            fbnavlist();

            Data_Realse();
            Data_guanzhu();
            if (online == 1) {
                document.getElementById("Userlogin").innerHTML = '退出登录';
            } else {
                document.getElementById("Userlogin").innerHTML = '登录';
            }

            document.getElementById("name").innerHTML = name;

            if (photos != null && photos != "") {
                document.getElementById("photo").src = photos;
                document.getElementById("photoi").src = photos;
            }

        }

        function TopMove() {
            var arr = document.getElementsByClassName("slide");
            for (var i = 0; i < arr.length; i++) {
                var top = parseFloat(arr[i].style.top);
                top -= 2;
                var height = 600;
                if (top <= -height) {
                    top = (arr.length - 1) * height;
                    clearInterval(moveId);
                }
                arr[i].style.top = top + "px";
            }
        }

        function divInterval() {
            moveId = setInterval(TopMove, 10);
        }

        timeId = setInterval(divInterval, 7000);

        function stop() {
            clearInterval(timeId);
        }

        function start() {
            clearInterval(timeId);
            timeId = setInterval(divInterval, 7000);
        }

        onblur = function () {
            stop();
        }
        onfocus = function () {
            start();
        }

        //我的发布---数据库
        function Data_Realse() {
            // //删除所有新闻tr，但是这个没有效果
            var trfb = document.getElementById("Name_time").getElementsByTagName("tr");
            var trfblength = trfb.length;
            for (var h = 0; h < trfblength; h++) {
                document.getElementById("Name_time").removeChild(trfb[0]);
            }

            var id = localStorage.getItem("id");
            var name = localStorage.getItem("name");
            var NewsMyData = [];//存放对于的点赞对象的数组
            var request = new XMLHttpRequest();
            request.open("GET", " http://139.199.55.139:8080/api/news/myNews?" +
                "u_id=" + id);
            // alert(id);
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);
                    if (json.status == "200") {
                        for (var i = 0; i < json["data"].length; i++) {
                            NewsMyData[i] = json["data"][i];
                        }
                        //显示点赞的新闻
                        for (var j = 0; j < json["data"].length; j++) {
                            //第一行---用户名+时间
                            var Na_TimeTr = document.createElement("tr");
                            var Nametd = document.createElement("td");
                            var Timetd = document.createElement("td");
                            Na_TimeTr.appendChild(Nametd);
                            Na_TimeTr.appendChild(Timetd);
                            Nametd.innerHTML = name;
                            Nametd.className = Nametd;
                            Timetd.innerHTML = NewsMyData[j]["n_release"];
//第三行----删除新闻按钮
                            var talkTr = document.createElement("tr");
                            var newstd3 = document.createElement("td");

                            var deleteNews = document.createElement("img");
                            (function (num) {
                                deleteNews.onclick = function () {
                                    delete_news(NewsMyData[num]["n_id"]);
                                };
                            })(j);
                            deleteNews.src = "images/back1.png";
                            deleteNews.className = "deteleNewsImg";
                            talkTr.appendChild(newstd3);
                            newstd3.appendChild(deleteNews);

                            //第二行-----新闻标题和图片
                            var newstr = document.createElement("tr");
                            var newstd1 = document.createElement("td");
                            var newstd2 = document.createElement("td");
                            var news_img = document.createElement("img");
                            var news_a = document.createElement("a");
                            newstr.appendChild(newstd1);
                            newstr.appendChild(newstd2);
                            newstd1.appendChild(news_img);
                            newstd2.appendChild(news_a);

                            news_img.src = NewsMyData[j]["n_img_url"];
                            news_a.innerHTML = NewsMyData[j]["n_title"];
                            news_img.className = "likenewsimg";
                            news_a.className = "eslipise_new";

                            document.getElementById("Name_time").appendChild(Na_TimeTr);
                            document.getElementById("Name_time").appendChild(talkTr);
                            document.getElementById("Name_time").appendChild(newstr);
                        }

                        //删除新闻
                        function delete_news(value) {
                            var n_id = value;
                            alert(n_id);
                            var request = new XMLHttpRequest();
                            request.open("GET", " http://139.199.55.139:8080/api/news/deleteNews?" +
                                "n_id=" + n_id);
                            request.send();
                            request.onreadystatechange = function () {
                                if (request.readyState === 4 && request.status === 200) {
                                    var json = JSON.parse(request.responseText);
                                    if (json.status == "200") {
                                        alert(json.message);

                                    }
                                    if (json.status == "500") {
                                        alert("删除失败");
                                    }
                                }
                            };
                        }
                    }
                }//end-   if(json.status=="200")
            };//end- request.onreadystatechange = function ()
        }

        function release() {
            var release = document.getElementById("release");
            var guanzhu = document.getElementById("guanzhu");
            var zan = document.getElementById("zan");
            var comments = document.getElementById("comments");
            if (release.style.display != 'block') {
                release.style.display = 'block';
                guanzhu.style.display = 'none';
                zan.style.display = 'none';
                comments.style.display = 'none';
            }
            // Data_Realse();
        }

        //关注---数据库
        function Data_guanzhu() {

            // //删除所有新闻tr，但是这个没有效果
            var focus_tr = document.getElementById("focusMy").getElementsByTagName("tr");
            var focus_trlength = focus_tr.length;
            for (var h = 0; h < focus_trlength; h++) {
                document.getElementById("focusMy").removeChild(focus_tr[0]);
            }

            var id = localStorage.getItem("id");
            var focussdata = [];//存放对于的点赞对象的数组
            var request = new XMLHttpRequest();
            request.open("GET", " http://139.199.55.139:8080/api/follow/myFollow?" +
                "u_id=" + id);
            request.send();
            // alert(id);
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);
                    if (json.status == "200") {
                        for (var i = 0; i < json["data"].length; i++) {
                            focussdata[i] = json["data"][i];
                            // alert(json.message);
                        }
                        for (var j = 0; j < json["data"].length; j++) {
                            //第一行--名
                            var childtr1 = document.createElement("tr");
                            var td1 = document.createElement("td");
                            var td2 = document.createElement("td");
                            var td3 = document.createElement("td");
                            var td1Img = document.createElement("img");
                            // var td2_lab=document.createElement("span");
                            var tdName = document.createElement("td");
                            var tdBtn = document.createElement("button");
                            (function (num) {
                                tdBtn.onclick = function () {
                                    var id = localStorage.getItem("id");
                                    focus_Btn(id, focussdata[num]["u_id"]);
                                };
                            })(j);

                            childtr1.appendChild(td1);
                            childtr1.appendChild(td2);
                            childtr1.appendChild(td3);
                            td1.appendChild(td1Img);
                            td2.appendChild(tdName);
                            td3.appendChild(tdBtn);

                            td1Img.src = focussdata[j]["u_photo"];
                            td1Img.className = "focusImg";
                            tdName.innerHTML = focussdata[j]["u_name"];
                            tdName.className = "focus_Name";
                            tdBtn.innerText = "已关注";
                            tdBtn.className = "focus_Btn";

                            document.getElementById("focusMy").appendChild(childtr1);
                        }

                        //取消关注
                        function focus_Btn(r1, r2) {
                            var id = r1;
                            var f_ufid = r2;
                            var request = new XMLHttpRequest();

                            request.open("GET", " http://139.199.55.139:8080/api/follow/deleteFollow?" +
                                "u_id=" + id + "&f_ufid=" + f_ufid);
                            request.send();
                            request.onreadystatechange = function () {
                                if (request.readyState === 4 && request.status === 200) {
                                    // alert(id);
                                    var json = JSON.parse(request.responseText);
                                    if (json.status == "200") {
                                        alert(json.message);
                                    }
                                    if (json.status == "500") {
                                        alert("取关失败");
                                    }
                                }
                            };
                        }
                    }
                }
            }
        }

        function guanzhu() {
            var release = document.getElementById("release");
            var guanzhu = document.getElementById("guanzhu");
            var zan = document.getElementById("zan");
            var comments = document.getElementById("comments");
            if (guanzhu.style.display != 'block') {
                guanzhu.style.display = 'block';
                release.style.display = 'none';
                zan.style.display = 'none';
                comments.style.display = 'none';
            }
            Data_guanzhu();
        }

        //点赞-数据库
        function zan() {
            //跳转
            var release = document.getElementById("release");
            var guanzhu = document.getElementById("guanzhu");
            var zan = document.getElementById("zan");
            var comments = document.getElementById("comments");
            if (zan.style.display != 'block') {
                release.style.display = 'none';
                guanzhu.style.display = 'none';
                zan.style.display = 'block';
                comments.style.display = 'none';
            }
            // //删除所有新闻tr，但是这个没有效果
            var trlike = document.getElementById("like_news").getElementsByTagName("tr");
            var trlikelength = trlike.length;
            for (var h = 0; h < trlikelength; h++) {
                // alert("要删除的新闻的个数"+trarray.length);
                document.getElementById("like_news").removeChild(trlike[0]);

            }

            var id = localStorage.getItem("id");
            var likedata = [];//存放对于的点赞对象的数组
            var request = new XMLHttpRequest();
            request.open("GET", " http://139.199.55.139:8080/api/like/myLike?" +
                "u_id=" + id);
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);
                    if (json.status == "200") {
                        for (var i = 0; i < json["data"].length; i++) {
                            likedata[i] = json["data"][i];
                        }
                        //显示点赞的新闻
                        for (var j = 0; j < json["data"].length; j++) {
                            var childtr = document.createElement("tr");
                            var tdFirst = document.createElement("td");
                            var tdSecond = document.createElement("td");
                            var tdFimg = document.createElement("img");
                            var tdSa = document.createElement("a");
                            document.getElementById("like_news").appendChild(childtr);
                            childtr.appendChild(tdFirst);
                            childtr.appendChild(tdSecond);
                            tdFirst.appendChild(tdFimg);
                            tdSecond.appendChild(tdSa);

                            tdFimg.src = likedata[j]["n_img_url"];
                            tdSa.innerHTML = likedata[j]["n_title"];
                            tdFimg.className = "likenewsimg";
                        }
                    }
                }
            };
        }

        //评论--数据库
        function comments() {
            var release = document.getElementById("release");
            var guanzhu = document.getElementById("guanzhu");
            var zan = document.getElementById("zan");
            var comments = document.getElementById("comments");
            if (comments.style.display != 'block') {
                comments.style.display = 'block';
                release.style.display = 'none';
                guanzhu.style.display = 'none';
                zan.style.display = 'none';
            }
            // //删除所有新闻tr，但是这个没有效果
            var trcomms = document.getElementById("commentsNew").getElementsByTagName("tr");
            var trcommlength = trcomms.length;
            for (var h = 0; h < trcommlength; h++) {
                document.getElementById("commentsNew").removeChild(trcomms[0]);
            }

            var id = localStorage.getItem("id");
            var name = localStorage.getItem("name");
            var commentsdata = [];//存放对于的点赞对象的数组
            var request = new XMLHttpRequest();
            request.open("GET", " http://139.199.55.139:8080/api/remark/getMyRemark?" +
                "u_id=" + id);
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);
                    if (json.status == "200") {
                        // alert(name);
                        for (var i = 0; i < json["data"].length; i++) {
                            commentsdata[i] = json["data"][i];
                        }
                        for (var j = 0; j < json["data"].length; j++) {
                            //第一行--名
                            var childtr1 = document.createElement("tr");
                            var name_td = document.createElement("td");
                            var comms_td = document.createElement("td");

                            childtr1.appendChild(name_td);
                            childtr1.appendChild(comms_td);

                            name_td.innerHTML = name + ":";
                            comms_td.innerHTML = commentsdata[j]["r_content"];
                            comms_td.className = "comms";

                            //第二行--显示新闻标题
                            var childtr2 = document.createElement("tr");
                            var dele_comms = document.createElement("td");
                            var comms_title = document.createElement("td");
                            var deleBtn = document.createElement("button");
                            (function (num) {
                                deleBtn.onclick = function () {
                                    dele_Btn(commentsdata[num]["r_id"]);
                                };
                            })(j);

                            comms_title.style.cssText = "border:1px solid #F00;border-radius: 5px;";
                            childtr2.appendChild(dele_comms);
                            childtr2.appendChild(comms_title);
                            dele_comms.appendChild(deleBtn);
                            deleBtn.innerText = "删除";
                            comms_title.innerHTML = commentsdata[j]["r_ntitle"];
                            deleBtn.style.cssText = "width:50px;height:20px; margin-left: 10px;margin-right: 7px;";

                            document.getElementById("commentsNew").appendChild(childtr1);
                            document.getElementById("commentsNew").appendChild(childtr2);
                        }

                        //删除评论
                        function dele_Btn(value) {
                            var r_id = value;
                            var request = new XMLHttpRequest();
                            request.open("GET", " http://139.199.55.139:8080/api/remark/deleteNewsRemark?" +
                                "r_id=" + r_id);
                            request.send();
                            alert(r_id);
                            request.onreadystatechange = function () {
                                if (request.readyState === 4 && request.status === 200) {
                                    var json = JSON.parse(request.responseText);
                                    if (json.status == "200") {
                                        alert(json.message);
                                    }
                                    if (json.status == "500") {
                                        alert("删除失败");
                                    }
                                }
                            };
                        };
                    }
                }
            };
        }

        //修改头像页面，更换头像
        function changeImg(val) {
            document.getElementById("showing").src = val;
        }

        //修改资料
        function alter() {
            var lunbo = document.getElementById("lunbo");
            var addNews = document.getElementById("addNews");
            var alterInfo = document.getElementById("alterInfo");
            var news_Conent = document.getElementById("news_Conent");
            if (alterInfo.style.display != 'block') {
                alterInfo.style.display = 'block';
                addNews.style.display = 'none';
                lunbo.style.display = 'none';
                news_Conent.style.display = 'none';
            }
        }

        //发布
        function addnew() {
            var lunbo = document.getElementById("lunbo");
            var addNews = document.getElementById("addNews");
            var alterInfo = document.getElementById("alterInfo");
            var news_Conent = document.getElementById("news_Conent");
            if (addNews.style.display != 'block') {
                addNews.style.display = 'block';
                alterInfo.style.display = 'none';
                lunbo.style.display = 'none';
                news_Conent.style.display = 'none';
            }

        }

        //轮播
        function xiangxi() {
            var lunbo = document.getElementById("lunbo");
            var addNews = document.getElementById("addNews");
            var alterInfo = document.getElementById("alterInfo");
            if (lunbo.style.display != 'block') {
                lunbo.style.display = 'block';
                addNews.style.display = 'none';
                alterInfo.style.display = 'none';
            }
        }

        //取消关注
        function GZ() {
            var con;
            if (document.getElementById("cancelfoucs").innerHTML == "已关注") {
                con = confirm("确定取消关注吗？");
                if (con == true) {
                    alert("取消关注成功！");
                    document.getElementById("nn1").remove();
                    // document.getElementById("cancelfoucs").innerHTML="关注";
                }
            }
        }

        //查看评论
        function talk_rearch() {
            var comments_rearch = document.getElementById("comments_rearch");
            if (comments_rearch.style.display != 'block') {
                comments_rearch.style.display = 'block';
            } else {
                comments_rearch.style.display = 'none';
            }

        }

        //删除评论
        function delete_talk() {
            var con;
            con = confirm("确定要删除这条评论吗？？？")
            if (con == true) {
                alert("删除成功！");
                document.getElementById("talk1").remove();
            }
        }

        //点赞
        function link_like() {
            if (document.getElementById("like").style.color != "#f00") {
                document.getElementById("like").style.color = "#f00";
            }
        }

        //退出登录
        function BackLogin() {
            var request = new XMLHttpRequest();
            var id = localStorage.getItem("id");
            request.open("GET", "http://139.199.55.139:8080/api/user/logout?u_id=" + id);
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);
                    if (json.status == "200") {
                        alert(json.message);
                        localStorage.clear();
                        window.location.reload();
                        var logining = document.getElementById("logining");
                        var logined = document.getElementById("logined");
                        if (logining.style.display != 'block') {
                            logined.style.display = 'none';
                            logining.style.display = 'block';
                        }

                    } else if (json.status == "500") {
                        alert("注销失败！");
                    }
                }

            }
        }

        //登录-数据库
        function userLogin() {
            var online = localStorage.getItem("online");
            if (online != null && online == "1") {
                var request = new XMLHttpRequest();
                var id = localStorage.getItem("id");
                if (id != null && id != "") {
                    request.open("GET", "http://139.199.55.139:8080/api/user/logout?u_id=" + id);
                    request.send();
                    request.onreadystatechange = function () {
                        if (request.readyState === 4 && request.status === 200) {
                            var json = JSON.parse(request.responseText);
                            if (json.status == "200") {
                                alert(json.message);
                                localStorage.clear();
                                window.location.reload();
                            } else if (json.status == "500") {
                                alert("注销失败！");
                            }
                        }

                    }
                }

            } else {
                window.location.href = "login.html";
            }

        }

        //点击回复
        function huifu() {
            var huifu = document.getElementById("huifu");
            if (huifu.style.display != 'block') {
                huifu.style.display = 'block';
            }
        }

        //回复消息
        function send_info() {
            var info_text = document.getElementById("info_text").value;
            var huifu = document.getElementById("huifu");
            var huifuResult = document.getElementById("huifuResult");

            if (info_text.length == 0) {
                alert("回复信息不能为空");
            } else if (info_text.length > 0) {
                huifuResult.style.display = 'block';
                huifu.style.display = 'none';

                document.getElementById("info_hf").innerHTML = info_text;

            }
        }

        //查看详情
        function new_content() {
            var news_Conent = document.getElementById("news_Conent");
            var lunbo = document.getElementById("lunbo");
            if (news_Conent.style.display != 'block') {
                news_Conent.style.display = 'block';
                lunbo.style.display = 'none';
            }
        }

        //关注作者
        function attention() {
            var con;
            if (document.getElementById("foucs_fr").innerHTML == "已关注") {
                alert("请到 “我的关注” 操作");
            } else {
                con = confirm("确定关注吗？");
                if (con == true) {
                    alert("关注成功！");
                    document.getElementById("foucs_fr").innerHTML = "已关注";
                }
            }
        }

        //发布评论
        function create() {
            var comm = document.getElementById("comment").value;
            // var commResult=document.getElementById("commentResult").value;
            if (comm.length > 0) {
                document.getElementById("commentResult").innerHTML = comm;
                document.getElementById("comment").value = "";
            } else if (comm.length == 0) {
                //
                alert("评论内容不能为空！");
            }
        }

        function huifu1() {
            var huifu = document.getElementById("huifu1");
            if (huifu.style.display != 'block') {
                huifu.style.display = 'block';
            }
        }

        //个人中心
        function trans_info() {
            var id = localStorage.getItem("id");
            if (id != null) {
                var logining = document.getElementById("logining");
                var logined = document.getElementById("logined");
                if (logined.style.display != 'block') {
                    logined.style.display = 'block';
                    logining.style.display = 'none';
                }
            } else {
                alert("请先登录");
            }

        }

        //返回评论页面
        function go_comms() {
            var logining = document.getElementById("logining");
            var logined = document.getElementById("logined");
            if (logining.style.display != 'block') {
                logining.style.display = 'block';
                logined.style.display = 'none';
            }

        }

        //修改资料-数据库
        function save_info() {
            var id = localStorage.getItem("id");
            alert(id);
            var request = new XMLHttpRequest();
            request.open("POST", "http://139.199.55.139:8080/api/user/updateInfo?");
            if (document.getElementById("name1").value == "") {
                document.getElementById("name1").value = localStorage.getItem("name");
            } else if (document.getElementById("phone1").value == "") {
                document.getElementById("phone1").value = localStorage.getItem("phone");
            } else if (document.getElementById("password1").value == "") {
                document.getElementById("password1").value = localStorage.getItem("password");
            }
            var data = "u_id=" + id + "&u_name=" + document.getElementById("name1").value + '&u_password=' + document.getElementById("password1").value
                + '&u_phone=' + document.getElementById("phone1").value;

            request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            request.send(data);
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    var json = JSON.parse(request.responseText);
                    if (json.status == "200") {
                        localStorage.setItem("id", json.data["u_id"]);
                        localStorage.setItem("name", json.data["u_name"]);
                        localStorage.setItem("password", json.data["u_password"]);
                        localStorage.setItem("photo", json.data["u_photo"]);
                        localStorage.setItem("regist", json.data["u_regist"]);
                        localStorage.setItem("login", json.data["u_login"]);
                        localStorage.setItem("phone", json.data["u_phone"]);
                        localStorage.setItem("online", json.data["u_online"]);
                        alert(json.message);
                    } else if (json.status == "500") {
                        alert("更新失败！");
                    }
                }

            }
        }

        //发布新闻---数据库
        function fabu() {
            if (document.getElementById("title_news").value == "" || document.getElementById("news_content").value == "") {
                alert("输入为空");
            } else {
                var myselect = document.getElementById("fbnewstype");
                var index = myselect.selectedIndex;

                myselect.options[index].value;

                var id = localStorage.getItem("id");

                var request = new XMLHttpRequest();

                request.open("POST", "http://139.199.55.139:8080/api/news/insertNews?");

                var data = "u_author_id=" + id + "&n_title=" + document.getElementById("title_news").value +
                    "&n_type=" + myselect.options[index].value + "&news_content=" + document.getElementById("news_content").value;

                request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

                request.send(data);
                // alert(id);
                request.onreadystatechange = function () {
                    if (request.readyState === 4 && request.status === 200) {

                        var json = JSON.parse(request.responseText);

                        if (json.status == "200") {
                            alert(json.message);

                        } else if (json.status == "500") {
                            // alert("上传失败");
                            document.getElementById("createResult").innerHTML = json.message;
                        }
                    }

                }
            }
        }

    </script>
</head>
<body>
<div class="news">
    <!--    //导航栏-->
    <div class="newsTypeBar">

        <ul class="layui-nav" lay-filter="" id="newsnav">

        </ul>

        <script>
            //注意：导航 依赖 element 模块，否则无法进行功能性操作
            layui.use('element', function () {
                var element = layui.element;
                //…
            });
        </script>

    </div>
    <!--    分类-->
    <div class="newsType">
        <!--        //新闻热点-->
        <div id="daily_recommd" style="background: #ffffff;border-radius: 8px;">
            <td><img src="images/hot_news.png" width="40" height="40"></td>
            <td>新闻列表</td>
            <hr>
            <!--            这个table里面会显示对应的新闻XL,一个新闻是一个tr-->
            <table id="daily_recommds" style="margin-left: 18px;">

            </table>
        </div>
    </div>
    <!--    新闻轮播-->
    <div id="lunbo" class="newsDetails" onmouseover="stop()" onmouseout="start()">
    </div>
    <!--    新闻详情-->
    <div id="news_Conent" class="newsDetails" style="display: none">
        <div id="newdaily_box1" class="box1_content"
             style="width: 120%;height: 600px;overflow-y: scroll;overflow-x: hidden;background-color: #ffffff;">
        </div>
    </div>
    <!--    发布新闻-->
    <div class="newsDetails" id="addNews" style="display: none">
        <h2 class="layui-bg-green" style="height: 33px;font-size: 24px;font-family: 楷体"><label
                style="margin-left: 82.5%">发布新闻</label></h2>
        <form class="layui-form" action="" style="margin-top: 20px;margin-left:0px;">
            <div class="layui-form-item">
                <label class="layui-form-label">新闻标题</label>
                <div class="layui-input-block">
                    <textarea id="title_news" required="required" cols="50" rows="2"></textarea>
                </div>
            </div>
        </form>
        <table class="layui-form-item">
            <tr>
                <label class="layui-form-label">新闻类别</label>
                <select class="layui-input-block" id="fbnewstype" style="width: 250px; margin-left: -0px">
                </select>
            </tr>
        </table>
        <form>
            <div class="layui-form-item layui-form-text">
                <label class="layui-form-label">发布内容</label>
                <div class="layui-input-block" style="width: 450px;">
                    <textarea id="news_content" name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">图片/视频</label>
                <div class="layui-input-block">
                    <button type="button" class="layui-btn">
                        <i class="layui-icon">&#xe67c;</i>上传图片/视频
                    </button>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button onclick="fabu()" class="layui-btn" lay-submit lay-filter="formDemo">发布</button>
                    <button class="layui-btn" onclick="xiangxi()">取消</button>
                </div>
            </div>
        </form>

    </div>
    <!--    修改信息-->
    <div id="alterInfo" class="newsDetails" style="display: none">
        <h2 class="layui-bg-green" style="height: 33px;font-size: 24px;font-family: 楷体"><label
                style="margin-left: 82.5%">修改资料</label></h2>
        <form class="layui-form" action="" style="margin-top: 10px;">
            <div class="layui-form-item">
                <label class="layui-form-label">头像</label>
                <div class="layui-input-block">
                    <img src="" id="showing" name="showing" width="120px" height="120px;" style="border-radius: 10%">
                    <button onchange="changeImg(this.value)" type="button" class="layui-btn" id="test1">
                        <i class="layui-icon">&#xe67c;</i>上传图片
                    </button>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">昵称</label>
                <div class="layui-input-block">
                    <input id="name1" type="text" lay-verify="required" placeholder="请输入标题" autocomplete="off"
                           class="layui-input" style="width: 200px;">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">手机号</label>
                <div class="layui-input-inline">
                    <input id="phone1" type="text" lay-verify="required" placeholder="请输入密码" autocomplete="off"
                           class="layui-input" style="width: 200px;">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">密码</label>
                <div class="layui-input-inline">
                    <input id="password1" type="password" lay-verify="required" placeholder="请输入密码" autocomplete="off"
                           class="layui-input" style="width: 200px;">
                </div>
            </div>
            <table style="margin-left: 2%">
                <tr>
                    <td>
                        <button id="save_info" onclick="save_info()" class="layui-btn"
                                style="margin-left: 100px;margin-top: 20px">确定
                        </button>
                    </td>
                    <td><input type="reset" id="Realter" class="layui-btn" style="margin-left: 50px;margin-top: 20px">
                    </td>
                </tr>
            </table>
        </form>

    </div>
</div>
</div>
</div>

<div class="Myinfo">
    <!--    未登录-->
    <div id="logining" style="width: 100%;height: 100%;">
        <div id="box1" style="height: 75%">
            <div style="height:22%;background: #393D49">

                <img id="photo" src="images/head.png"
                     style="margin-left:160px;margin-top: 8px;width: 55px;height: 55px;">

                <p style="margin-top: 3px;margin-left:100px;">
                    <button onclick="trans_info()" class="layui-btn layui-btn-radius" style="height: 30px;">个人中心
                    </button>
                    <button id="Userlogin" class="layui-btn layui-btn-radius" style="margin-left: 20px;height: 28px;"
                            onclick="userLogin()">登&nbsp;录
                    </button>
                </p>
            </div>
            <!--            评论区-->
            <div id="comment_box" style="height:75%;margin-top: -5px;font-size: 16px;background: #ffffff">
                <p style="font-size: 16px;margin-top: 5px;margin-left: 5px;">
                    <img src="images/talkk.png" width="25px;" height="25px">
                </p>
                <span id="talk_Name1">王子轩</span>
                <label>:</label>
                <span style="font-size: 16px;width: 250px;">OMG !是我师傅！</span>

                <button style="font-size: 10px;color: #7c7c7c;" onclick="huifu1()">回复</button>
                <br>
                <span id="huifuResult1" style="margin-left: 8px;font-size: 12px;display: none">我
                                    <span style="color: blue;margin-left: 3px;font-size: 10px;">回复</span>

                                    <span style="margin-left: 5px;">:</span>
                                    <span id="info_hf1" style="font-size: 13px;"></span>
                                </span>
                <p id="huifu1" style="margin-top: 5px;margin-left: 18px;display: none">
                    <input type="text" id="info_text1"
                           style="border-radius: 5px;width: 180px;height: 20px;font-size: 12px;" placeholder="回复消息">
                    <button style="background: #56B4DC;border-radius: 3px;" onclick="send_info()">发送</button>
                </p>
                <p id="commentResult" style="margin-left: 5px;"></p>
            </div>
        </div>
        <!--        发表评论-->
        <div style="height: 27.2%;margin-top: -22px; background: #393D49">
            <p style="font-size: 16px;margin-top: 8px;margin-left: 5px;color: #ffffff;">评论区：</p>
            <textarea id="comment" name="" required lay-verify="required" placeholder="请输入" class="layui-textarea"
                      style="margin-left: 10px;width:95%;margin-top: 3px;"></textarea>
            <p style="margin-top: 8px;">
                <button class="layui-btn layui-btn-radius" style="width:70px;height: 30px;margin-left: 80px;"
                        onclick="reset()">重置
                </button>
                <button class="layui-btn layui-btn-radius" style="width: 70px;height: 30px;margin-left: 70px;"
                        onclick="create()">发表
                </button>
            </p>
        </div>
    </div>
    <!--登录之后-->
    <div id="logined" style="background:#393D49;display: none ">
        <table>
            <tr>
                <td width="80" colspan="2"><img id="photoi" src="images/head.png" width="60" height="60"
                                                style="margin-left: 10px;margin-top: 3px;"></td>
                <td width="180" colspan="2"><label id="name" style="font-size: 20px;color: #ffffff">用户名</label></td>
                <td>
                    <ul class="layui-nav">
                        <li class="layui-nav-item">
                            <a href="">设置</a>
                            <dl class="layui-nav-child">
                                <dd><a href="javascript:;" onclick="alter()">修改信息</a></dd>
                                <dd><a href="javascript:;" onclick="go_comms()">返回</a></dd>
                                <dd><a href="javascript:;" onclick="BackLogin()">退出</a></dd>
                            </dl>
                        </li>
                    </ul>

                    <!--                    <p style="font-size: 14px;" onclick="alter()"><a href="#" style="color: #ffffff" >修改资料</a> </p >-->
                    <!--                    <p style="font-size: 14px;" onclick="go_comms()"><a href="#"style="color: #ffffff">去评论</a></p>-->
                </td>
            </tr>
        </table>
        <hr>
        <nav style="margin-top: 5px;">
            <ul>
                <li style="margin-left: 20px;"><a href="#" onclick="release()" style="color: #ffffff">发布</a></li>
                <li style="margin-left: 25px;"><a href="#" onclick="guanzhu()" style="color: #ffffff"> 关注</a></li>
                <li style="margin-left: 25px;"><a href="#" onclick="zan()" style="color: #ffffff"> 点赞</a></li>
                <li style="margin-left: 25px;"><a href="#" onclick="comments()" style="color: #ffffff">评论</a></li>
                <li style="margin-left: 25px;">
                    <button type="button" class="layui-btn layui-btn-radius" onclick="addnew()"
                            style="width: 90px;height: 30px;">添加新闻
                    </button>
                </li>

                <!--                <li style="margin-left: 40px;"><img src="images/add.png" width="28" height="28" style="margin-top: -3px;" onclick="addnew()"></li>-->
            </ul>
        </nav>
        <hr>
        <div class="box">
            <div style="width: 105%;height:100%;overflow-y: scroll;overflow-x: hidden;">
                <!--        发布-->
                <div id="release" class="box2">
                    <table id="Name_time">
                    </table>

                </div>
                <!--        关注-->
                <div id="guanzhu" class="box2" style="display: none">
                    <table id="focusMy">

                    </table>

                </div>
                <!--         点赞-->
                <div id="zan" class="box2" style="display: none">
                    <table id="like_news" style="margin-left: 18px;">

                    </table>
                    <hr>
                    <p id="zanResult"></p>
                </div>
                <!--         评论-->
                <div id="comments" class="box2" style="display: none">
                    <table id="commentsNew" style="margin-left: 10px;">

                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>